self.addEventListener("push",t=>{let i={};try{i=t.data?t.data.json():{}}catch(t){i={}}const n="string"==typeof i.title&&i.title.trim()?i.title:"PostureX",o="string"==typeof i.body?i.body:"",a="string"==typeof i.icon&&i.icon.trim()?i.icon:"/icon.svg",e=i&&"object"==typeof i.data&&i.data&&"string"==typeof i.data.url&&i.data.url.startsWith("/")?i.data.url:"/dashboard";t.waitUntil(self.registration.showNotification(n,{body:o,icon:a,badge:"/icon.svg",data:{url:e},silent:!0,renotify:!1,requireInteraction:!1}))}),self.addEventListener("notificationclick",t=>{var i;t.notification.close();const n=null!==(i=t.notification)&&void 0!==i&&null!==(i=i.data)&&void 0!==i&&i.url&&"string"==typeof t.notification.data.url?t.notification.data.url:"/dashboard";t.waitUntil(clients.matchAll({type:"window",includeUncontrolled:!0}).then(t=>{const i=new URL(n,self.location.origin).href;for(const n of t)if(n.url===i&&"focus"in n)return n.focus();if(clients.openWindow)return clients.openWindow(i)}))});